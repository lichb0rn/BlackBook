/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var r=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var m=(g,l)=>{for(var t in l)r(g,t,{get:l[t],enumerable:!0})},S=(g,l,t,i)=>{if(l&&typeof l=="object"||typeof l=="function")for(let s of d(l))!f.call(g,s)&&s!==t&&r(g,s,{get:()=>l[s],enumerable:!(i=c(l,s))||i.enumerable});return g};var w=g=>S(r({},"__esModule",{value:!0}),g);var T={};m(T,{default:()=>h});module.exports=w(T);var n=require("obsidian"),b={slashTrigger:"/",fuzzySearch:!0,highlight:!0,showPath:!1,showFileContent:!1,snippetPath:"Snippets",ignoreProperties:!0,templaterSupport:!0},p=class extends n.EditorSuggest{constructor(t){super(t.app);this.plugin=t}fuzzyMatch(t,i){let s=0,e=0,a=[];for(t=t.toLowerCase(),i=i.toLowerCase();s<t.length&&e<i.length;)t[s]===i[e]&&(e++,this.plugin.settings.highlight&&a.push(s)),t[s]===i[e]&&e++,s++;return e===i.length?this.plugin.settings.highlight?a:[]:!1}getAllSnippets(t){if(t.startsWith(" "))return[];let i=this.app.vault.getMarkdownFiles(),s=[];for(let e=0;e<i.length;e++){let a=i[e];if(a.path.startsWith(this.plugin.settings.snippetPath))if(this.plugin.settings.fuzzySearch){let o=this.fuzzyMatch(a.name,t);o&&s.push({file:a,positions:o})}else a.name.toLowerCase().contains(t.toLowerCase())&&s.push({file:a,positions:[]})}return s}getSuggestions(t){return this.getAllSnippets(t.query)}onTrigger(t,i,s){let e=i.getLine(t.line).slice(0,t.ch);if(!e.contains(this.plugin.settings.slashTrigger))return null;let a=e.lastIndexOf(this.plugin.settings.slashTrigger),o=e.slice(a+1,e.length);return{start:{...t,ch:a},end:t,query:o}}removeFrontmatter(t){return this.plugin.settings.ignoreProperties&&t.startsWith("---")?t.replace(/^---\n[\s\S]*?\n---\n?/,""):t}async selectSuggestion(t,i){var a;let s=await this.plugin.app.vault.cachedRead(t.file),e=this.removeFrontmatter(s);(a=this.context)==null||a.editor.replaceRange(e,this.context.start,this.context.end),this.plugin.settings.templaterSupport&&await this.plugin.runTemplaterReplace(),this.close()}buildHighlighted(t,i){let s="";for(let e=0;e<t.length;e++)i.includes(e)?s+=`<b class="slash-fuzzy-match">${t[e]}</b>`:s+=t[e];return s}async renderSuggestion(t,i){let s=t.file.basename,e=t.positions;if(this.plugin.settings.highlight&&e){let a=i.createEl("div");a.innerHTML=this.buildHighlighted(s,e)}else i.createEl("div",{text:t.file.basename});if(this.plugin.settings.showPath&&i.createEl("small",{cls:"slash-path",text:t.file.path}),this.plugin.settings.showFileContent){let a=await this.plugin.app.vault.cachedRead(t.file);i.createDiv({cls:"slash-file"}).createEl("small",{cls:"slash-file-content",text:a.trim()})}}unload(){}},h=class extends n.Plugin{async onload(){await this.loadSettings(),this.registerEditorSuggest(new p(this)),this.addSettingTab(new u(this.app,this))}async runTemplaterReplace(){let t="templater-obsidian:replace-in-file-templater",i="editor:save-file";this.app.commands.executeCommandById(i),(0,n.debounce)(()=>{this.app.commands.executeCommandById(t)},300,!0)()}onunload(){}async loadSettings(){this.settings=Object.assign({},b,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},u=class extends n.PluginSettingTab{constructor(t,i){super(t,i);this.plugin=i}display(){let{containerEl:t}=this;t.empty(),new n.Setting(t).setName("Slash trigger").setDesc("Enter a character that will trigger template insert suggestion").addText(s=>s.setPlaceholder("Slash trigger").setValue(this.plugin.settings.slashTrigger).onChange(async e=>{e&&e.length>1?(new n.Notice("Please use one character to avoid conflict"),s.setValue(e[0])):(this.plugin.settings.slashTrigger=e,await this.plugin.saveSettings())})),new n.Setting(t).setName("Fuzzy Search").setDesc("You don\u2019t have to type the exact name.If the letters appear in the right order, it will match.Example: \u2018btn\u2019 \u2192 \u2018Button\u2019.").addToggle(s=>{s.setValue(this.plugin.settings.fuzzySearch).onChange(async e=>{this.plugin.settings.fuzzySearch=e,await this.plugin.saveSettings()})}),new n.Setting(t).setName("Highlight").setDesc("Highlight matching terms of search results").addToggle(s=>{s.setValue(this.plugin.settings.highlight).onChange(async e=>{this.plugin.settings.highlight=e,await this.plugin.saveSettings()})}),new n.Setting(t).setName("Show full path of the snippet file").addToggle(s=>{s.setValue(this.plugin.settings.showPath).onChange(async e=>{this.plugin.settings.showPath=e,await this.plugin.saveSettings()})}),new n.Setting(t).setName("Show snippet content").addToggle(s=>{s.setValue(this.plugin.settings.showFileContent).onChange(async e=>{this.plugin.settings.showFileContent=e,await this.plugin.saveSettings()})}),new n.Setting(t).setName("Snippet path").setDesc("Set a folder that has all the snippets files").addText(s=>s.setPlaceholder("Snippet path").setValue(this.plugin.settings.snippetPath).onChange(async e=>{this.plugin.settings.snippetPath=e,await this.plugin.saveSettings()})),new n.Setting(t).setName("Ignore properties").setDesc("Enable this if you don't want to insert properties values in the snippets notes").addToggle(s=>{s.setValue(this.plugin.settings.ignoreProperties).onChange(async e=>{this.plugin.settings.ignoreProperties=e,await this.plugin.saveSettings()})});let i=document.createDocumentFragment();i.append("Enable this if you want to use ",i.createEl("a",{href:"https://github.com/SilentVoid13/Templater",text:"Templater"})," files inside snippets. (To use this, you need Templater plugin enabled)"),new n.Setting(t).setName("Enable Templater plugin support").setDesc(i).addToggle(s=>{s.setValue(this.plugin.settings.templaterSupport).onChange(async e=>{this.plugin.settings.templaterSupport=e,await this.plugin.saveSettings()})})}};

/* nosourcemap */